# All the settings 

@@@ note
Izanami is written with play and akka. You can fin additional configuration information here https://www.playframework.com/documentation/2.6.x/Configuration. 
@@@

## Events 

Here, you can find settings about the event store configuration.  

| Config property                                                    | Env variable                             | Description                                                                                                                                                                                                                          | Default value                                                   |
|--------------------------------------------------------------------|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
| `izanami.mode`                                                     | `IZANAMI_MODE`                           | Use `dev` when developing. Could be `prod` or `dev`                                                                                                                                                                                  | `prod`                                                          |
| `izanami.events.store`                                             | `IZANAMI_EVENT_STORE`                    | Type of the event store. Could be `InMemory`, `Kafka`, `Redis`, `Distributed`.                                                                                                                                                       | `InMemory`                                                      |
| `izanami.events.distributed.topic`                                 | `DISTRIBUTED_TOPIC`                      | Name of the topic when `izanami.events.store`=`Distributed`                                                                                                                                                                          | `izanami`                                                       |
| `izanami.events.redis.topic`                                       | `REDIS_TOPIC`                            | Name of the topic when `izanami.events.store`=`Redis`                                                                                                                                                                                | `izanami:events`                                                |
| `izanami.events.kafka.topic`                                       | `KAFKA_TOPIC`                            | Name of the topic when `izanami.events.store`=`Kafka`                                                                                                                                                                                | `izanami`                                                       |
| `izanami.cluster.seed-node-host`                                   | `AKKA_CLUSTER SEED_NODE_HOST`            | The host of the seed used to form a cluster                                                                                                                                                                                          | `127.0.0.1`                                                     |
| `izanami.cluster.seed-node-port`                                   | `AKKA_CLUSTER SEED_NODE_PORT`            | The port of the seed used to form a cluster                                                                                                                                                                                          | 2551                                                            |
| `izanami.cluster.akka.remote.netty.tcp.hostname`                   | `AKKA_CLUSTER_HOST`                      | The host of the current node                                                                                                                                                                                                         | `127.0.0.1`                                                     |
| `izanami.cluster.akka.remote.netty.tcp.port`                       | `AKKA_CLUSTER_PORT`                      | The port of the current node                                                                                                                                                                                                         | `127.0.0.1`                                                     |
| `izanami.cluster.akka.remote.netty.tcp.bind-hostname`              | `AKKA_CLUSTER_HOST`                      | The internal host of the current node (eg docker)                                                                                                                                                                                    | `127.0.0.1`                                                     |
| `izanami.cluster.akka.remote.netty.tcp.bind-port`                  | `AKKA_CLUSTER_BIND_PORT`                 | The internal port of the current node (eg docker)                                                                                                                                                                                    | `${cluster.akka.remote.netty.tcp.port}`                         |
| `izanami.cluster.akka.cluster.seed-nodes`                          | `AKKA_CLUSTER_SEED_NODES`                | An array of seeds                                                                                                                                                                                                                    | `["akka.tcp://"${cluster.system-name}"@"${izanami.cluster.seed-node-host}":"${izanami.cluster.seed-node-port}]`                         |

@@@ note
The distributed event store rely on akka cluster and akka distributed pub/sub. You can find more information  here https://doc.akka.io/docs/akka/current/cluster-usage.html.  
@@@


## Db config 

Here, you can find the settings to configure the different data stores. 

| Config property                                                    | Env variable                             | Description                                                                                                                                                                                                                          | Default value                                                   |
|--------------------------------------------------------------------|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
| `izanami.db.default`                                               | `IZANAMI_DATABASE`                       | Type of the default datastore. Could be `InMemory`, `LevelDb`, `Redis`, `Cassandra`, `Elastic`.                                                                                                                                      | `LevelDb`                                                       |
| `izanami.db.leveldb.parentPath`                                    | `LEVEL_DB_PARENT_PATH`                   | The root folder when data are stored by level db                                                                                                                                                                                     | `target/leveldb`                                                |
| `izanami.db.cassandra.host`                                        | `CASSANDRA_HOST`                         | The host name of the cassandra server                                                                                                                                                                                                | `localhost`                                                     |
| `izanami.db.cassandra.port`                                        | `CASSANDRA_PORT`                         | The port of the cassandra server                                                                                                                                                                                                     | 9042                                                            |
| `izanami.db.cassandra.addresses`                                   | `CASSANDRA_HOSTS_AND_PORTS`              | An array of host and port                                                                                                                                                                                                            | `[${izanami.db.cassandra.host}":"${izanami.db.cassandra.port}]` |
| `izanami.db.cassandra.replicationFactor`                           | `CASSANDRA_REPLICATION_FACTOR`           | The replication factor for the data                                                                                                                                                                                                  | 1                                                               |
| `izanami.db.cassandra.keyspace`                                    | `CASSANDRA_KEYSPACE`                     | the name of the keyspace for datas                                                                                                                                                                                                   | `izanami`                                                       |
| `izanami.db.redis.host`                                            | `REDIS_HOST`                             | The host of the redis server                                                                                                                                                                                                         | `localhost`                                                     |
| `izanami.db.redis.port`                                            | `REDIS_PORT`                             | The port of the redis server                                                                                                                                                                                                         | 6379                                                            |
| `izanami.db.redis.password`                                        | `REDIS_PASSWORD`                         | The password for the redis server                                                                                                                                                                                                    |                                                                 |
| `izanami.db.redis.slaves`                                          |                                          | An array of redis config for slaves. For example: `izanami.db.redis.slaves=[{ host = localhost, port = 6380 }]`                                                                                                                      |                                                                 |
| `izanami.db.redis.databaseId`                                      | `REDIS_DATABASE_ID`                      | the id of the redis database.                                                                                                                                                                                                        |                                                                 |
| `izanami.db.kafka.host`                                            | `KAFKA_HOST`                             | The host of the kafka server                                                                                                                                                                                                         | localhost                                                       |
| `izanami.db.kafka.port`                                            | `KAFKA_PORT`                             | The port of the kafka server                                                                                                                                                                                                         | 9092                                                            |
| `izanami.db.kafka.servers`                                         | `KAFKA_HOSTS_AND_PORTS`                  | A string with host and port separated by ','                                                                                                                                                                                         | `${izanami.db.kafka.host}":"${izanami.db.kafka.port}`           |
| `izanami.db.kafka.keyPass`                                         | `KAFKA_PASSWORD`                         | The password for ssl certificate                                                                                                                                                                                                     |                                                                 |
| `izanami.db.kafka.keystore.location`                               | `KAFKA_KEYSTORE_LOCATION`                | The absolute location of the keystore if ssl is used                                                                                                                                                                                 |                                                                 |
| `izanami.db.kafka.truststore.location`                             | `KAFKA_TRUSTORE_LOCATION`                | The absolute location of the truststore,if ssl is used                                                                                                                                                                               |                                                                 |
| `izanami.db.elastic.host`                                          | `ELASTIC_HOST`                           | The host of the elastic server                                                                                                                                                                                                       | `127.0.0.1`                                                     |
| `izanami.db.elastic.port`                                          | `ELASTIC_PORT`                           | The port of the elastic server                                                                                                                                                                                                       | 9200                                                            |
| `izanami.db.elastic.scheme`                                        | `ELASTIC_SCHEME`                         | The scheme used for the elastic server                                                                                                                                                                                               | `http`                                                          |
| `izanami.db.elastic.user`                                          | `ELASTIC_USER`                           | The user if elastic is secured                                                                                                                                                                                                       |                                                                 |
| `izanami.db.elastic.password`                                      | `ELASTIC_PASSWORD`                       | The password if elastic is secured                                                                                                                                                                                                   |                                                                 |
| `izanami.db.elastic.automaticRefresh`                              |                                          | Force refresh on each insert, update or delete. For dev only                                                                                                                                                                         | false                                                           |


## Threads configuration 

| Config property                                                    | Env variable                             | Description                                                                                                                                                                                                                          | Default value                                                   |
|--------------------------------------------------------------------|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
| `izanami.script-dispatcher.thread-pool-executor.fixed-pool-size`   | `SCRIPT_EXECUTION_POOLSIZE`              | The size of the threapool to execute scripts with nashorn                                                                                                                                                                            | 32                                                              |
| `izanami.level-db-dispatcher.thread-pool-executor.fixed-pool-size` | `LEVEL_DB_POOLSIZE`                      | The size of the threapool for leveldb blocking calls.                                                                                                                                                                                | 1                                                               |

## Filters 

Here, you can find the settings to configure the security filter. 

| Config property                                                    | Env variable                             | Description                                                                                                                                                                                                                          | Default value                                                   |
|--------------------------------------------------------------------|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
| `izanami.filter.type`                                              | `IZANAMI_FILTER_TYPE`                    | The type of the http filter used for security and identification. Izanami provide first class support for Otoroshi reverse proxy so you can set to Otoroshi if you already work with that product. Could be `Default` or `Otoroshi`. | `Default`                                                       |
| `izanami.filter.otoroshi.sharedKey`                                | `CLAIM_SHAREDKEY`                        | Shared key used to encrypt jwt token                                                                                                                                                                                                 | `none`                                                          |
| `izanami.filter.otoroshi.headerClaim`                              | `FILTER_CLAIM_HEADER_NAME`               | The name of the claim header                                                                                                                                                                                                         | `Otoroshi-Claim`                                            |
| `izanami.filter.otoroshi.headerRequestId`                          | `FILTER_REQUEST_ID_HEADER_NAME`          | The name of the requestId header                                                                                                                                                                                                     | `Otoroshi-Request-Id`                                       |
| `izanami.filter.otoroshi.headerGatewayState`                       | `FILTER_GATEWAY_STATE HEADER_NAME`       | The name of the state header                                                                                                                                                                                                         | `Otoroshi-State`                                            |
| `izanami.filter.otoroshi.headerGatewayStateResp`                   | `FILTER_GATEWAY_STATE RESP_HEADER_NAME`  | The name of the state resp header                                                                                                                                                                                                    | `Otoroshi-State-Resp`                                       |
| `izanami.filter.default.sharedKey`                                 | `FILTER_CLAIM_SHAREDKEY`                 | The shared key used to encrypt jwt token. It should be the same value between each Izanami nodes in case of a cluster.                                                                                                               | `none`                                                          |
| `izanami.filter.default.cookieClaim`                               | `FILTER_COOKIE_NAME`                     | The name of the cookie used to store the user session.                                                                                                                                                                               | `Izanami`                                                       |
| `izanami.filter.default.issuer`                                    | `FILTER_ISSUER`                          | The issuer for jwt token                                                                                                                                                                                                             | `Izanami`                                                       |
| `izanami.filter.default.apiKeys.headerClientId`                    | `FILTER_CLAIM_HEADER CLIENT_ID_NAME`     | The name of the header for clientId                                                                                                                                                                                                  | `Izanami-Client-Id`                                             |
| `izanami.filter.default.apiKeys.headerClientSecret`                | `FILTER_CLAIM_HEADER CLIENT_SECRET_NAME` | The name of the header of clientSecret                                                                                                                                                                                               | `Izanami-Client-Secret`                                         |
| `izanami.logout.url`                                               | `LOGOUT_URL`                             | The logout url                                                                                                                                                                                                                       | `/api/logout`                                                   |


## Domains 

| Config property                                                    | Env variable                             | Description                                                                                                                                                                                                                          | Default value                                                   |
|--------------------------------------------------------------------|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
| `izanami.config.db.type`                                           | `CONFIG_DATABASE`                        | The db used to store configs                                                                                                                                                                                                         | `${izanami.db.default}`                                         |
| `izanami.config.db.conf.namespace`                                 | `CONFIG_NAMESPACE`                       | The namespace used for configs                                                                                                                                                                                                       | `izanami:configuration`                                         |
| `izanami.features.db.type`                                         | `FEATURE_DATABASE`                       | The db used to store features                                                                                                                                                                                                        | `${izanami.db.default}`                                         |
| `izanami.features.db.conf.namespace`                               | `FEATURE_NAMESPACE`                      | The namespace used for features                                                                                                                                                                                                      | `izanami:features`                                              |
| `izanami.globalScript.db.type`                                     | `SCRIPT_DATABASE`                        | The db used to store scripts                                                                                                                                                                                                         | `${izanami.db.default}`                                         |
| `izanami.globalScript.db.conf.namespace`                           | `SCRIPT_NAMESPACE`                       | The namespace used for scripts                                                                                                                                                                                                       | `izanami:globalscripts`                                         |
| `izanami.experiment.db.type`                                       | `EXPERIMENT_DATABASE`                    | The db used to store experiments                                                                                                                                                                                                     | `${izanami.db.default}`                                         |
| `izanami.experiment.db.conf.namespace`                             | `EXPERIMENT_NAMESPACE`                   | The namespace used for experiments                                                                                                                                                                                                   | `izanami:experiment`                                            |
| `izanami.variantBinding.db.type`                                   | `EXPERIMENT_VARIANT BINDING_DATABASE`    | The db used to store variant bindings                                                                                                                                                                                                | `${izanami.db.default}`                                         |
| `izanami.variantBinding.db.conf.namespace`                         | `EXPERIMENT_VARIANT BINDING_NAMESPACE`   | The namespace used for variant bindings                                                                                                                                                                                              | `izanami:variantbinding`                                        |
| `izanami.experimentEvent.db.type`                                  | `EXPERIMENT_EVENT DATABASE`              | The db used to store experiment events                                                                                                                                                                                               | `${izanami.db.default}`                                         |
| `izanami.experimentEvent.db.conf.namespace`                        | `EXPERIMENT_EVENT NAMESPACE`             | The namespace used for experiment events                                                                                                                                                                                             | `izanami:experimentevent`                                       |
| `izanami.webhook.db.type`                                          | `WEBHOOK_DATABASE`                       | The db used to store webhooks                                                                                                                                                                                                        | `${izanami.db.default}`                                         |
| `izanami.webhook.db.conf.namespace`                                | `WEBHOOK_NAMESPACE`                      | The namespace used for webhooks                                                                                                                                                                                                      | `izanami:webhook`                                               |
| `izanami.user.db.type`                                             | `USER_DATABASE`                          | The db used to store users                                                                                                                                                                                                           | `${izanami.db.default}`                                         |
| `izanami.user.db.conf.namespace`                                   | `USER_NAMESPACE`                         | The namespace used for users                                                                                                                                                                                                         | `izanami:user`                                                  |
| `izanami.user.initialize.userId`                                   | `INITIAL_USER_ID`                        | The login to use for the first connection                                                                                                                                                                                            | `admin`                                                         |
| `izanami.user.initialize.password`                                 | `INITIAL_USER_PASSWORD`                  | The password to use for the first connection                                                                                                                                                                                         | `admin123`                                                      |
| `izanami.apikey.db.type`                                           | `APIKEY_DATABASE`                        | The db used to store api keys                                                                                                                                                                                                        | `${izanami.db.default}`                                         |
| `izanami.apikey.db.conf.namespace`                                 | `APIKEY_NAMESPACE`                       | The namespace used for api keys                                                                                                                                                                                                      | `izanami:apikey`                                                |
| `izanami.apikey.initialize.clientId`                               | `INITIAL_APIKEY_CLIENT_ID`               | A client id used from config                                                                                                                                                                                                         |                                                                 |
| `izanami.apikey.initialize.clientSecret`                           | `INITIAL_APIKEY_CLIENT_SECRET`           | A client secret used from config                                                                                                                                                                                                     |                                                                 |
| `izanami.apikey.initialize.authorizedPatterns`                     | `INITIAL_APIKEY_AUTHORIZED_PATTERN`      | A pattern used from config                                                                                                                                                                                                           |                                                                 |
| `izanami.patch.db.type`                                            | `PATCH_DATABASE`                         | The db used to store patchs                                                                                                                                                                                                          | `${izanami.db.default}`                                         |
| `izanami.patch.db.conf.namespace`                                  | `PATCH_NAMESPACE`                        | The namespace used for patchs                                                                                                                                                                                                        | `izanami:patchs`                                                |



