<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>APIs · Izanami</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='Izanami'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/page.css"/>

<!--
<link rel="shortcut icon" href="../images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Izanami
</a>
<div class="version-number">
0.1*
</div>
</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<div class="nav-toc">
<ul>
  <li><a href="../quickstart.html" class="page">Quick start</a></li>
  <li><a href="../about.html" class="page">About Izanami</a></li>
  <li><a href="../philosophy.html" class="page">Philosophy</a></li>
  <li><a href="../features.html" class="page">What&rsquo;s in the box</a></li>
  <li><a href="../architecture/index.html" class="page">Architecture</a></li>
  <li><a href="../getizanami/index.html" class="page">Get Izanami</a>
  <ul>
    <li><a href="../getizanami/binaries.html" class="page">From Binaries</a></li>
    <li><a href="../getizanami/docker.html" class="page">From Docker</a></li>
    <li><a href="../getizanami/fromsources.html" class="page">From sources</a></li>
  </ul></li>
  <li><a href="../settings/index.html" class="page">Settings</a>
  <ul>
    <li><a href="../settings/database.html" class="page">Choose the database</a></li>
    <li><a href="../settings/settings.html" class="page">All the settings</a></li>
  </ul></li>
  <li><a href="../ui.html" class="page">UI usage</a></li>
  <li><a href="../api.html" class="page">APIs usage</a></li>
  <li><a href="../configs/index.html" class="page">Shared Configs</a>
  <ul>
    <li><a href="../configs/ui.html" class="page">The UI</a></li>
    <li><a href="../configs/api.html" class="page">APIs</a></li>
  </ul></li>
  <li><a href="../features/index.html" class="page">Feature flipping</a>
  <ul>
    <li><a href="../features/ui.html" class="page">The UI</a></li>
    <li><a href="../features/api.html" class="page">APIs</a></li>
  </ul></li>
  <li><a href="../experiments/index.html" class="page">A/B testing</a>
  <ul>
    <li><a href="../experiments/ui.html" class="page">The UI</a></li>
    <li><a href="../experiments/api.html" class="active page">APIs</a></li>
  </ul></li>
  <li><a href="../events.html" class="page">Listen to events</a></li>
  <li><a href="../clients/index.html" class="page">Clients</a>
  <ul>
    <li><a href="../clients/jvm.html" class="page">Java &amp; Scala</a></li>
    <li><a href="../clients/react.html" class="page">React</a></li>
    <li><a href="../clients/node.html" class="page">Node</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="../index.html">Izanami</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Izanami
</a>
<div class="version-number">
0.1*
</div>
</div>
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
<div class="nav-toc">
<ul>
  <li><a href="../quickstart.html" class="page">Quick start</a></li>
  <li><a href="../about.html" class="page">About Izanami</a></li>
  <li><a href="../philosophy.html" class="page">Philosophy</a></li>
  <li><a href="../features.html" class="page">What&rsquo;s in the box</a></li>
  <li><a href="../architecture/index.html" class="page">Architecture</a></li>
  <li><a href="../getizanami/index.html" class="page">Get Izanami</a>
  <ul>
    <li><a href="../getizanami/binaries.html" class="page">From Binaries</a></li>
    <li><a href="../getizanami/docker.html" class="page">From Docker</a></li>
    <li><a href="../getizanami/fromsources.html" class="page">From sources</a></li>
  </ul></li>
  <li><a href="../settings/index.html" class="page">Settings</a>
  <ul>
    <li><a href="../settings/database.html" class="page">Choose the database</a></li>
    <li><a href="../settings/settings.html" class="page">All the settings</a></li>
  </ul></li>
  <li><a href="../ui.html" class="page">UI usage</a></li>
  <li><a href="../api.html" class="page">APIs usage</a></li>
  <li><a href="../configs/index.html" class="page">Shared Configs</a>
  <ul>
    <li><a href="../configs/ui.html" class="page">The UI</a></li>
    <li><a href="../configs/api.html" class="page">APIs</a></li>
  </ul></li>
  <li><a href="../features/index.html" class="page">Feature flipping</a>
  <ul>
    <li><a href="../features/ui.html" class="page">The UI</a></li>
    <li><a href="../features/api.html" class="page">APIs</a></li>
  </ul></li>
  <li><a href="../experiments/index.html" class="page">A/B testing</a>
  <ul>
    <li><a href="../experiments/ui.html" class="page">The UI</a></li>
    <li><a href="../experiments/api.html" class="active page">APIs</a></li>
  </ul></li>
  <li><a href="../events.html" class="page">Listen to events</a></li>
  <li><a href="../clients/index.html" class="page">Clients</a>
  <ul>
    <li><a href="../clients/jvm.html" class="page">Java &amp; Scala</a></li>
    <li><a href="../clients/react.html" class="page">React</a></li>
    <li><a href="../clients/node.html" class="page">Node</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="../index.html">Izanami</a></li>
  <li><a href="../experiments/index.html">A/B testing</a></li>
  <li>APIs</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#apis" name="apis" class="anchor"><span class="anchor-link"></span></a>APIs</h1>
<div class="toc ">
<ul>
  <li><a href="../experiments/api.html#basic-workflow" class="header">Basic workflow</a></li>
  <li><a href="../experiments/api.html#data-model" class="header">Data model</a></li>
  <li><a href="../experiments/api.html#basic-crud-operations" class="header">Basic CRUD operations</a>
  <ul>
    <li><a href="../experiments/api.html#list-all" class="header">List all</a></li>
    <li><a href="../experiments/api.html#create-an-experiment" class="header">Create an experiment</a></li>
    <li><a href="../experiments/api.html#get-an-experiment" class="header">Get an experiment</a></li>
    <li><a href="../experiments/api.html#update-an-experiment" class="header">Update an experiment</a></li>
    <li><a href="../experiments/api.html#delete-an-experiment" class="header">Delete an experiment</a></li>
  </ul></li>
  <li><a href="../experiments/api.html#operations-on-variants" class="header">Operations on Variants</a>
  <ul>
    <li><a href="../experiments/api.html#mark-variant-as-displayed" class="header">Mark variant as displayed</a></li>
    <li><a href="../experiments/api.html#mark-variant-as-won" class="header">Mark variant as won</a></li>
    <li><a href="../experiments/api.html#the-tree-api" class="header">The tree API</a></li>
  </ul></li>
  <li><a href="../experiments/api.html#download-and-upload" class="header">Download and Upload</a>
  <ul>
    <li><a href="../experiments/api.html#download-experiments" class="header">Download experiments</a></li>
    <li><a href="../experiments/api.html#upload-experiments" class="header">Upload experiments</a></li>
    <li><a href="../experiments/api.html#download-bindings" class="header">Download bindings</a></li>
    <li><a href="../experiments/api.html#upload-bindings" class="header">Upload bindings</a></li>
    <li><a href="../experiments/api.html#download-events" class="header">Download events</a></li>
    <li><a href="../experiments/api.html#upload-bindings" class="header">Upload bindings</a></li>
  </ul></li>
</ul>
</div>
<h2><a href="#basic-workflow" name="basic-workflow" class="anchor"><span class="anchor-link"></span></a>Basic workflow</h2>
<p>In order to run an experimentation you have to do the following actions </p>
<ul>
  <li>create an experiment with variant</li>
  <li>when a user interact with your application
    <ul>
      <li>mark variant displayed for the user</li>
      <li>mark variant won for the user if the variant is a success</li>
    </ul>
  </li>
</ul>
<h2><a href="#data-model" name="data-model" class="anchor"><span class="anchor-link"></span></a>Data model</h2>
<p>An experiment has the following structure : </p>
<pre class="prettyprint"><code class="language-json">{
  &quot;id&quot;: &quot;izanami:example:button&quot;,
  &quot;name&quot;: &quot;My experiment&quot;,
  &quot;description&quot;: &quot;The description ...&quot;,
  &quot;enabled&quot;: true,
  &quot;variants&quot;: [
    {
      &quot;id&quot;: &quot;A&quot;,
      &quot;name&quot;: &quot;Variant A&quot;,
      &quot;description&quot;: &quot;Variant A is about ...&quot;,
      &quot;traffic&quot;: 0.5
    },
    {
      &quot;id&quot;: &quot;B&quot;,
      &quot;name&quot;: &quot;Variant B&quot;,
      &quot;description&quot;: &quot;Variant B is about ...&quot;,
      &quot;traffic&quot;: 0.5   
    }
  ]
}
</code></pre>
<h2><a href="#basic-crud-operations" name="basic-crud-operations" class="anchor"><span class="anchor-link"></span></a>Basic CRUD operations</h2>
<h3><a href="#list-all" name="list-all" class="anchor"><span class="anchor-link"></span></a>List all</h3>
<p>The query params are optional and the value used in this example are the default one.</p>
<pre class="prettyprint"><code class="language-bash">curl -X GET \
  &#39;http://localhost:9000/api/experiments?pattern=*&amp;page=1&amp;pageSize=15&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; | jq
</code></pre>
<p>Will respond with a 200 status code:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;izanami:example:button&quot;,
      &quot;name&quot;: &quot;My First experiment&quot;,
      &quot;description&quot;: &quot;See what people like the most about ...&quot;,
      &quot;enabled&quot;: true,
      &quot;variants&quot;: [
        {
          &quot;id&quot;: &quot;A&quot;,
          &quot;name&quot;: &quot;Variant A&quot;,
          &quot;description&quot;: &quot;Variant A is about ...&quot;,
          &quot;traffic&quot;: 0.5,
          &quot;currentPopulation&quot;: 3
        },
        {
          &quot;id&quot;: &quot;B&quot;,
          &quot;name&quot;: &quot;Variant B&quot;,
          &quot;description&quot;: &quot;Variant B is about ...&quot;,
          &quot;traffic&quot;: 0.5,
          &quot;currentPopulation&quot;: 3
        }
      ]
    }
  ],
  &quot;metadata&quot;: {
    &quot;page&quot;: 1,
    &quot;pageSize&quot;: 15,
    &quot;count&quot;: 1,
    &quot;nbPages&quot;: 1
  }
}
</code></pre>
<h3><a href="#create-an-experiment" name="create-an-experiment" class="anchor"><span class="anchor-link"></span></a>Create an experiment</h3>
<pre class="prettyprint"><code class="language-bash">curl -X POST \
  &#39;http://localhost:9000/api/experiments&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  -d &#39;
    {
      &quot;id&quot;: &quot;izanami:test:button:color&quot;,
      &quot;name&quot;: &quot;Red button or Blue Button&quot;,
      &quot;description&quot;: &quot;Which button is the best ...&quot;,
      &quot;enabled&quot;: true,
      &quot;variants&quot;: [
        {
          &quot;id&quot;: &quot;A&quot;,
          &quot;name&quot;: &quot;Red button&quot;,
          &quot;description&quot;: &quot;Variant A is the red button&quot;,
          &quot;traffic&quot;: 0.5        
        },
        {
          &quot;id&quot;: &quot;B&quot;,
          &quot;name&quot;: &quot;Variant B&quot;,
          &quot;description&quot;: &quot;Variant B is the blue button&quot;,
          &quot;traffic&quot;: 0.5
        }
      ]
    }
  &#39; | jq
</code></pre>
<p>Will respond with a 201 status code:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;id&quot;: &quot;izanami:test:button:color&quot;,
  &quot;name&quot;: &quot;Red button or Blue Button&quot;,
  &quot;description&quot;: &quot;Which button is the best ...&quot;,
  &quot;enabled&quot;: true,
  &quot;variants&quot;: [
    {
      &quot;id&quot;: &quot;A&quot;,
      &quot;name&quot;: &quot;Red button&quot;,
      &quot;description&quot;: &quot;Variant A is the red button&quot;,
      &quot;traffic&quot;: 0.5
    },
    {
      &quot;id&quot;: &quot;B&quot;,
      &quot;name&quot;: &quot;Variant B&quot;,
      &quot;description&quot;: &quot;Variant B is the blue button&quot;,
      &quot;traffic&quot;: 0.5
    }
  ]
}
</code></pre>
<h3><a href="#get-an-experiment" name="get-an-experiment" class="anchor"><span class="anchor-link"></span></a>Get an experiment</h3>
<pre class="prettyprint"><code class="language-bash">curl -X GET \
  &#39;http://localhost:9000/api/experiments/izanami:test:button:color&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  | jq
</code></pre>
<p>Will respond with a 200 status code:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;id&quot;: &quot;izanami:test:button:color&quot;,
  &quot;name&quot;: &quot;Red button or Blue Button&quot;,
  &quot;description&quot;: &quot;Which button is the best ...&quot;,
  &quot;enabled&quot;: true,
  &quot;variants&quot;: [
    {
      &quot;id&quot;: &quot;A&quot;,
      &quot;name&quot;: &quot;Red button&quot;,
      &quot;description&quot;: &quot;Variant A is the red button&quot;,
      &quot;traffic&quot;: 0.5
    },
    {
      &quot;id&quot;: &quot;B&quot;,
      &quot;name&quot;: &quot;Variant B&quot;,
      &quot;description&quot;: &quot;Variant B is the blue button&quot;,
      &quot;traffic&quot;: 0.5
    }
  ]
}
</code></pre>
<h3><a href="#update-an-experiment" name="update-an-experiment" class="anchor"><span class="anchor-link"></span></a>Update an experiment</h3>
<pre class="prettyprint"><code class="language-bash">curl -X PUT \
  &#39;http://localhost:9000/api/experiments/izanami:test:button:color&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  -d &#39;
      {
        &quot;id&quot;: &quot;izanami:test:button:color&quot;,
        &quot;name&quot;: &quot;Red button or Blue Button&quot;,
        &quot;description&quot;: &quot;Which button is the better ...&quot;,
        &quot;enabled&quot;: true,
        &quot;variants&quot;: [
          {
            &quot;id&quot;: &quot;A&quot;,
            &quot;name&quot;: &quot;Red button&quot;,
            &quot;description&quot;: &quot;Variant A is the red button&quot;,
            &quot;traffic&quot;: 0.5        
          },
          {
            &quot;id&quot;: &quot;B&quot;,
            &quot;name&quot;: &quot;Variant B&quot;,
            &quot;description&quot;: &quot;Variant B is the blue button&quot;,
            &quot;traffic&quot;: 0.5
          }
        ]
      }
    &#39; | jq
</code></pre>
<p>Will respond with a 200 status code:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;id&quot;: &quot;izanami:test:button:color&quot;,
  &quot;name&quot;: &quot;Red button or Blue Button&quot;,
  &quot;description&quot;: &quot;Which button is the better ...&quot;,
  &quot;enabled&quot;: true,
  &quot;variants&quot;: [
    {
      &quot;id&quot;: &quot;A&quot;,
      &quot;name&quot;: &quot;Red button&quot;,
      &quot;description&quot;: &quot;Variant A is the red button&quot;,
      &quot;traffic&quot;: 0.5
    },
    {
      &quot;id&quot;: &quot;B&quot;,
      &quot;name&quot;: &quot;Variant B&quot;,
      &quot;description&quot;: &quot;Variant B is the blue button&quot;,
      &quot;traffic&quot;: 0.5
    }
  ]
}
</code></pre>
<h3><a href="#delete-an-experiment" name="delete-an-experiment" class="anchor"><span class="anchor-link"></span></a>Delete an experiment</h3>
<pre class="prettyprint"><code class="language-bash">curl -X DELETE \
  &#39;http://localhost:9000/api/experiments/izanami:test:button:color&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  | jq 
</code></pre>
<p>Will respond with a 200 status code:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;id&quot;: &quot;izanami:test:button:color&quot;,
  &quot;name&quot;: &quot;Red button or Blue Button&quot;,
  &quot;description&quot;: &quot;Which button is the better ...&quot;,
  &quot;enabled&quot;: true,
  &quot;variants&quot;: [
    {
      &quot;id&quot;: &quot;A&quot;,
      &quot;name&quot;: &quot;Red button&quot;,
      &quot;description&quot;: &quot;Variant A is the red button&quot;,
      &quot;traffic&quot;: 0.5
    },
    {
      &quot;id&quot;: &quot;B&quot;,
      &quot;name&quot;: &quot;Variant B&quot;,
      &quot;description&quot;: &quot;Variant B is the blue button&quot;,
      &quot;traffic&quot;: 0.5
    }
  ]
}
</code></pre>
<h2><a href="#operations-on-variants" name="operations-on-variants" class="anchor"><span class="anchor-link"></span></a>Operations on Variants</h2>
<p>A variant is associated to an end user. To get the variant to display you have to provide a &ldquo;clientId&rdquo;. </p>
<h3><a href="#mark-variant-as-displayed" name="mark-variant-as-displayed" class="anchor"><span class="anchor-link"></span></a>Mark variant as displayed</h3>
<p>The mark variant as displayed operation will generate an event of type <code>VariantDisplayedEvent</code>. It will also bind a variant to a user if it&rsquo;as called for the first time. </p>
<pre class="prettyprint"><code class="language-bash">curl -X POST \
  &#39;http://localhost:9000/api/experiments/izanami:test:button:color/displayed?clientId=ragnar.lodbrock@gmail.com&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; | jq 
</code></pre>
<p>Will respond with a 200 status code:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;id&quot;: &quot;izanami:test:button:color:A:ragnar.lodbrock@gmail.com:displayed:940975692945817657&quot;,
  &quot;experimentId&quot;: &quot;izanami:test:button:color&quot;,
  &quot;clientId&quot;: &quot;ragnar.lodbrock@gmail.com&quot;,
  &quot;variant&quot;: {
    &quot;id&quot;: &quot;A&quot;,
    &quot;name&quot;: &quot;Red button&quot;,
    &quot;description&quot;: &quot;Variant A is the red button&quot;,
    &quot;traffic&quot;: 0.5,
    &quot;currentPopulation&quot;: 1
  },
  &quot;date&quot;: &quot;2017-12-13T17:04:22.338&quot;,
  &quot;transformation&quot;: 0,
  &quot;variantId&quot;: &quot;A&quot;,
  &quot;@type&quot;: &quot;VariantDisplayedEvent&quot;
}
</code></pre>
<p>The following end point return the variant associated to a user : </p>
<pre class="prettyprint"><code class="language-bash">curl -X GET \
  &#39;http://localhost:9000/api/experiments/izanami:test:button:color/variant?clientId=ragnar.lodbrock@gmail.com&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  | jq
</code></pre>
<p>A response with a 200 status code is returned if the variant was marked as displayed at least once. A 404 status code is return if not :</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;id&quot;: &quot;A&quot;,
  &quot;name&quot;: &quot;Red button&quot;,
  &quot;description&quot;: &quot;Variant A is the red button&quot;,
  &quot;traffic&quot;: 0.5,
  &quot;currentPopulation&quot;: 1
}
</code></pre>
<h3><a href="#mark-variant-as-won" name="mark-variant-as-won" class="anchor"><span class="anchor-link"></span></a>Mark variant as won</h3>
<p>The mark variant as won operation will generate an event of type <code>VariantWonEvent</code>. This action should be call if the corresponding user &ldquo;validate&rdquo; the variant displayed. </p>
<pre class="prettyprint"><code class="language-bash">curl -X POST \
  &#39;http://localhost:9000/api/experiments/izanami:test:button:color/won?clientId=ragnar.lodbrock@gmail.com&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; | jq 
</code></pre>
<p>Will respond with a 200 status code:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;id&quot;: &quot;izanami:test:button:color:A:ragnar.lodbrock@gmail.com:won:940978218122346556&quot;,
  &quot;experimentId&quot;: &quot;izanami:test:button:color&quot;,
  &quot;clientId&quot;: &quot;ragnar.lodbrock@gmail.com&quot;,
  &quot;variant&quot;: {
    &quot;id&quot;: &quot;A&quot;,
    &quot;name&quot;: &quot;Red button&quot;,
    &quot;description&quot;: &quot;Variant A is the red button&quot;,
    &quot;traffic&quot;: 0.5,
    &quot;currentPopulation&quot;: 1
  },
  &quot;date&quot;: &quot;2017-12-13T17:14:24.387&quot;,
  &quot;transformation&quot;: 100,
  &quot;variantId&quot;: &quot;A&quot;,
  &quot;@type&quot;: &quot;VariantWonEvent&quot;
}
</code></pre>
<h3><a href="#the-tree-api" name="the-tree-api" class="anchor"><span class="anchor-link"></span></a>The tree API</h3>
<p>The tree api will return a set of experiment as a tree form based on a pattern. If the binding between a user and a variant is not done, the association will be done but no event will be generated.</p>
<pre class="prettyprint"><code class="language-bash">curl -X GET \
  &#39;http://localhost:9000/api/tree/experiments?pattern=izanami:test:*&amp;clientId=ragnar.lodbrock@gmail.com&#39; \
  -H &#39;Content-Type: application/json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  | jq
</code></pre>
<p>Will respond with a 200 status code:</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;izanami&quot;: {
    &quot;test&quot;: {
      &quot;button&quot;: {
        &quot;color&quot;: {
          &quot;variant&quot;: &quot;A&quot;
        }
      }
    }
  }
}
</code></pre>
<h2><a href="#download-and-upload" name="download-and-upload" class="anchor"><span class="anchor-link"></span></a>Download and Upload</h2>
<p>Download and upload is done using the <a href="http://ndjson.org/">nd-json</a> format. </p>
<h3><a href="#download-experiments" name="download-experiments" class="anchor"><span class="anchor-link"></span></a>Download experiments</h3>
<pre class="prettyprint"><code class="language-bash">curl -X GET \
  &#39;http://localhost:9000/api/experiments.ndjson&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; | jq
</code></pre>
<p>Will return each item separated by a <code>\n</code>.</p>
<pre class="prettyprint"><code class="language-nd-json">{
  &quot;id&quot;: &quot;izanami:example:button&quot;,
  &quot;name&quot;: &quot;My First experiment&quot;,
  &quot;description&quot;: &quot;See what people like the most about ...&quot;,
  &quot;enabled&quot;: true,
  &quot;variants&quot;: [
    {
      &quot;id&quot;: &quot;A&quot;,
      &quot;name&quot;: &quot;Variant A&quot;,
      &quot;description&quot;: &quot;Variant A is about ...&quot;,
      &quot;traffic&quot;: 0.5,
      &quot;currentPopulation&quot;: 3
    },
    {
      &quot;id&quot;: &quot;B&quot;,
      &quot;name&quot;: &quot;Variant B&quot;,
      &quot;description&quot;: &quot;Variant B is about ...&quot;,
      &quot;traffic&quot;: 0.5,
      &quot;currentPopulation&quot;: 3
    }
  ]
}
{
  &quot;id&quot;: &quot;izanami:test:button:color&quot;,
  &quot;name&quot;: &quot;Red button or Blue Button&quot;,
  &quot;description&quot;: &quot;Which button is the best ...&quot;,
  &quot;enabled&quot;: true,
  &quot;variants&quot;: [
    {
      &quot;id&quot;: &quot;A&quot;,
      &quot;name&quot;: &quot;Red button&quot;,
      &quot;description&quot;: &quot;Variant A is the red button&quot;,
      &quot;traffic&quot;: 0.5,
      &quot;currentPopulation&quot;: 1
    },
    {
      &quot;id&quot;: &quot;B&quot;,
      &quot;name&quot;: &quot;Variant B&quot;,
      &quot;description&quot;: &quot;Variant B is the blue button&quot;,
      &quot;traffic&quot;: 0.5
    }
  ]
}
</code></pre>
<h3><a href="#upload-experiments" name="upload-experiments" class="anchor"><span class="anchor-link"></span></a>Upload experiments</h3>
<pre class="prettyprint"><code class="language-bash">curl -X POST \
  &#39;http://localhost:9000/api/experiments.ndjson&#39; \
  -H &#39;Content-Type: application/nd-json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  -d &#39;...&#39; \
   | jq 
</code></pre>
<p>Will return </p>
<pre class="prettyprint"><code class="language-json">{
  &quot;success&quot;: 2,
  &quot;errors&quot;: {
    &quot;errors&quot;: [],
    &quot;fieldErrors&quot;: {}
  }
}
</code></pre>
<h3><a href="#download-bindings" name="download-bindings" class="anchor"><span class="anchor-link"></span></a>Download bindings</h3>
<pre class="prettyprint"><code class="language-bash">curl -X GET \
  &#39;http://localhost:9000/api/experiments/bindings.ndjson&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; | jq
</code></pre>
<pre class="prettyprint"><code class="language-nd-json">{
  &quot;variantBindingKey&quot;: &quot;izanami:example:button:adelegue@yopmail.com&quot;,
  &quot;variantId&quot;: &quot;A&quot;
}
{
  &quot;variantBindingKey&quot;: &quot;izanami:example:button:ragnar.lodbrock@gmail.com&quot;,
  &quot;variantId&quot;: &quot;B&quot;
}
</code></pre>
<h3><a href="#upload-bindings" name="upload-bindings" class="anchor"><span class="anchor-link"></span></a>Upload bindings</h3>
<pre class="prettyprint"><code class="language-bash">curl -X POST \
  &#39;http://localhost:9000/api/experiments/bindings.ndjson&#39; \
  -H &#39;Content-Type: application/nd-json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  -d &#39;...&#39; \
   | jq 
</code></pre>
<h3><a href="#download-events" name="download-events" class="anchor"><span class="anchor-link"></span></a>Download events</h3>
<pre class="prettyprint"><code class="language-bash">curl -X GET \
  &#39;http://localhost:9000/api/experiments/events.ndjson&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; | jq
</code></pre>
<pre class="prettyprint"><code class="language-nd-json">{
  &quot;id&quot;: &quot;izanami:example:button:A:adelegue@yopmail.com:displayed:940960339163349002&quot;,
  &quot;experimentId&quot;: &quot;izanami:example:button&quot;,
  &quot;clientId&quot;: &quot;adelegue@yopmail.com&quot;,
  &quot;variant&quot;: {
    &quot;id&quot;: &quot;A&quot;,
    &quot;name&quot;: &quot;Variant A&quot;,
    &quot;description&quot;: &quot;Variant A is about ...&quot;,
    &quot;traffic&quot;: 0.5,
    &quot;currentPopulation&quot;: 3
  },
  &quot;date&quot;: &quot;2017-12-13T16:03:21.711&quot;,
  &quot;transformation&quot;: 50,
  &quot;variantId&quot;: &quot;A&quot;,
  &quot;@type&quot;: &quot;VariantDisplayedEvent&quot;
}
{
  &quot;id&quot;: &quot;izanami:example:button:A:adelegue@yopmail.com:won:940960356812980243&quot;,
  &quot;experimentId&quot;: &quot;izanami:example:button&quot;,
  &quot;clientId&quot;: &quot;adelegue@yopmail.com&quot;,
  &quot;variant&quot;: {
    &quot;id&quot;: &quot;A&quot;,
    &quot;name&quot;: &quot;Variant A&quot;,
    &quot;description&quot;: &quot;Variant A is about ...&quot;,
    &quot;traffic&quot;: 0.5,
    &quot;currentPopulation&quot;: 3
  },
  &quot;date&quot;: &quot;2017-12-13T16:03:25.919&quot;,
  &quot;transformation&quot;: 100,
  &quot;variantId&quot;: &quot;A&quot;,
  &quot;@type&quot;: &quot;VariantWonEvent&quot;
}
</code></pre>
<h3><a href="#upload-bindings" name="upload-bindings" class="anchor"><span class="anchor-link"></span></a>Upload bindings</h3>
<pre class="prettyprint"><code class="language-bash">curl -X POST \
  &#39;http://localhost:9000/api/experiments/events.ndjson&#39; \
  -H &#39;Content-Type: application/nd-json&#39; \
  -H &#39;Izanami-Client-Id: xxxx&#39; \
  -H &#39;Izanami-Client-Secret: xxxx&#39; \
  -d &#39;...&#39; \
   | jq 
</code></pre>
<div class="nav-next">
<p><strong>Next:</strong> <a href="../events.html">Listen to events</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="../experiments/api.html#apis" class="header">APIs</a>
  <ul>
    <li><a href="../experiments/api.html#basic-workflow" class="header">Basic workflow</a></li>
    <li><a href="../experiments/api.html#data-model" class="header">Data model</a></li>
    <li><a href="../experiments/api.html#basic-crud-operations" class="header">Basic CRUD operations</a></li>
    <li><a href="../experiments/api.html#operations-on-variants" class="header">Operations on Variants</a></li>
    <li><a href="../experiments/api.html#download-and-upload" class="header">Download and Upload</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2017</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/magellan.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

</html>
