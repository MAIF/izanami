"use strict";(self.webpackChunkizanami_documentation=self.webpackChunkizanami_documentation||[]).push([[3451],{9270:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>x,default:()=>y,frontMatter:()=>m,metadata:()=>v,toc:()=>j});var i=n(5893),a=n(1151),s=n(1361);const o=n.p+"assets/images/feature-form-cc532a046b97225ed45438bb6b0a1409.png",r=n.p+"assets/images/feature-5d0c9f25ef7b722f33948ab9473cc5f8.png",c=n.p+"assets/images/context-creation-3dbcf4878f0ce54227b8f1f5ab5d7cc7.png",d=n.p+"assets/images/feature-overloads-16ee81e299e5c5454ecb9ec8a32f24ff.png",l=n.p+"assets/images/overload-creation-f9812d2897bf4e9e35c06c86354016b7.png",u=n.p+"assets/images/hover-test-1e05b859a33d6d82d6d64365cca61e3f.png",p=n.p+"assets/images/prod-inactive-1d0c1132cc57a30f72a02c82b69dafac.png",f=n.p+"assets/images/qa-active-836097b0fb6897d7b36ea8d7f3b61586.png",h=n.p+"assets/images/link-generator-e2f8ee8a81a1cce30e0a29513e90c00a.png",m={title:"Handling environnements"},x=void 0,v={id:"guides/env-contexts",title:"Handling environnements",description:"When working with multiple environments (dev, QA, production, ...) it's often necessary to have a different feature activation strategy for each of them.",source:"@site/docs/04-guides/01-env-contexts.mdx",sourceDirName:"04-guides",slug:"/guides/env-contexts",permalink:"/izanami/docs/guides/env-contexts",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Handling environnements"},sidebar:"tutorialSidebar",previous:{title:"Guides",permalink:"/izanami/docs/guides/"},next:{title:"Multi-condition feature",permalink:"/izanami/docs/guides/multi-conditions-feature"}},g={},j=[{value:"Create the feature",id:"create-the-feature",level:2},{value:"Create a context",id:"create-a-context",level:2},{value:"Test it",id:"test-it",level:2},{value:"Call it from client application",id:"call-it-from-client-application",level:2}];function b(e){const t={code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"When working with multiple environments (dev, QA, production, ...) it's often necessary to have a different feature activation strategy for each of them."}),"\n",(0,i.jsx)(t.p,{children:"For instance, a feature could be active for everyone in QA environment and disabled in production."}),"\n",(0,i.jsx)(t.p,{children:"Contexts are a good way to solve this. The idea is to have one context per environment."}),"\n",(0,i.jsx)(s.j,{children:(0,i.jsx)(t.p,{children:'When using contexts to model environments, a good practice is to keep "root"\nactivation strategy for production.This way, the production state of the\nfeature is obvious, since it\'s the state displayed by default in project view.'})}),"\n",(0,i.jsx)(t.h2,{id:"create-the-feature",children:"Create the feature"}),"\n",(0,i.jsx)(t.p,{children:"Let's start by creating a feature. In this example, we will assume that our project is a bookstore website\nand that we want to add possibility to display user comments on books."}),"\n",(0,i.jsxs)(t.p,{children:["Therefore, let's create a ",(0,i.jsx)(t.code,{children:"comments"})," feature."]}),"\n",(0,i.jsx)("img",{src:o}),"\n",(0,i.jsx)("img",{src:r}),"\n",(0,i.jsx)(t.p,{children:"As you can see, we created this feature as disabled by default.\nThis default strategy represents our production environment, since our feature is still in tests, we don't want it to be activated for anyone in production."}),"\n",(0,i.jsx)(t.h2,{id:"create-a-context",children:"Create a context"}),"\n",(0,i.jsxs)(t.p,{children:["We want to activate our ",(0,i.jsx)(t.code,{children:"comments"})," feature in QA environment, so that it can be tested before activating it to production."]}),"\n",(0,i.jsxs)(t.p,{children:["To achieve this, we'll need a ",(0,i.jsx)(t.code,{children:"QA"})," context, let's create it. We have two choices here :"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Creating a local context, this is useful for creating project specific contexts"}),"\n",(0,i.jsx)(t.li,{children:"Creating a global context, that could be used by any projects of the tenant"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Since QA looks like a generic environment, let's create a global context."}),"\n",(0,i.jsx)("img",{src:c}),"\n",(0,i.jsxs)(t.p,{children:["Once our context is created, let's get back to our ",(0,i.jsx)(t.code,{children:"website"})," project and add an overload for our ",(0,i.jsx)(t.code,{children:"comments"})," feature."]}),"\n",(0,i.jsx)("img",{src:d}),"\n",(0,i.jsxs)(t.p,{children:["Select ",(0,i.jsx)(t.code,{children:"QA"})," context and make sure to check ",(0,i.jsx)(t.code,{children:"Enabled"})," to activate feature for this context."]}),"\n",(0,i.jsx)("img",{src:l}),"\n",(0,i.jsx)(t.h2,{id:"test-it",children:"Test it"}),"\n",(0,i.jsx)(t.p,{children:"Now let's make sure that our feature is correctly active in QA and inactive in prod."}),"\n",(0,i.jsx)(t.p,{children:"Let's open test form for our feature."}),"\n",(0,i.jsx)("img",{src:u}),"\n",(0,i.jsx)(t.p,{children:"This form allows to test feature state for both QA and root context."}),"\n",(0,i.jsx)("img",{src:p}),"\n",(0,i.jsx)("img",{src:f}),"\n",(0,i.jsx)(t.h2,{id:"call-it-from-client-application",children:"Call it from client application"}),"\n",(0,i.jsx)(t.p,{children:"To indicate context to Izanami, you'll need to add a query parameter to your query. You can either do it manually or make Izanami generate correct URL for you."}),"\n",(0,i.jsx)(t.p,{children:'To get URL from Izanami, just click on the "URL" button in your project feature table.'}),"\n",(0,i.jsx)(t.p,{children:"A form opens that let you specify context to embed in query. Generated URL is available in the bottom input."}),"\n",(0,i.jsx)("img",{src:h})]})}function y(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}},1361:(e,t,n)=>{n.d(t,{j:()=>o});const i={description__trivia:"description__trivia_yesz"};var a=n(4625),s=n(5893);function o(e){let{children:t}=e;return(0,s.jsxs)("div",{className:i.description__trivia,children:[(0,s.jsx)("img",{src:a.Z}),(0,s.jsx)("div",{children:t})]})}},4625:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/izanami_compressed-659337582c1667d92966e42fa1bfea3f.webp"},1151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>o});var i=n(7294);const a={},s=i.createContext(a);function o(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);