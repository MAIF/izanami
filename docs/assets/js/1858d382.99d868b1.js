"use strict";(self.webpackChunkizanami_documentation=self.webpackChunkizanami_documentation||[]).push([[9600],{7783:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>f,contentTitle:()=>h,default:()=>x,frontMatter:()=>c,metadata:()=>u,toc:()=>p});var s=n(5893),t=n(1151),o=n(1361);const a=n.p+"assets/images/webhook-page-f70e328e0357c2ecf5afe48b540f3e25.png",r=n.p+"assets/images/webhook-form-abcff76b8c7c3a44a7966c06d5fca65d.png",l=n.p+"assets/images/webhook-handlebar-form-f2210a02f3a15a3dd6b75f97e0b8ca58.png",d=n.p+"assets/images/webhook-completed-form-cd0df86bdc721d4973cbeab90be744e5.png",c={title:"Webhooks"},h=void 0,u={id:"guides/webhooks",title:"Webhooks",description:"This page covers features available only from 2.3.0",source:"@site/docs/04-guides/13-webhooks.mdx",sourceDirName:"04-guides",slug:"/guides/webhooks",permalink:"/izanami/docs/guides/webhooks",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{title:"Webhooks"},sidebar:"tutorialSidebar",previous:{title:"Configuring Izanami",permalink:"/izanami/docs/guides/configuration"},next:{title:"Data transfer",permalink:"/izanami/docs/guides/transfer-data"}},f={},p=[{value:"Webhook creation",id:"webhook-creation",level:2},{value:"Webhook call",id:"webhook-call",level:2},{value:"Resilience",id:"resilience",level:2},{value:"Rights",id:"rights",level:2}];function m(e){const i={a:"a",code:"code",h2:"h2",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.j,{children:"This page covers features available only from 2.3.0"}),"\n",(0,s.jsx)(i.p,{children:"Webhooks are a way to make Izanami call a provided URL when a feature is modified."}),"\n",(0,s.jsx)(i.p,{children:"Given URL is called with new activation status for modified feature."}),"\n",(0,s.jsx)(i.p,{children:"This is useful if you want to execute some specific code on feature activation,\nor if you want to keep your feature in sync with an external system that can't perform HTTP\ncall to Izanami."}),"\n",(0,s.jsx)(i.h2,{id:"webhook-creation",children:"Webhook creation"}),"\n",(0,s.jsx)(i.p,{children:'To create a webhook, go to the webhook screen of your tenant and click the "Create new webhook" button.'}),"\n",(0,s.jsx)("img",{src:a}),"\n",(0,s.jsx)("img",{src:r}),"\n",(0,s.jsx)(i.p,{children:"This form allows configuring your webhook :"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"url"})," indicates which URL should be call when a feature is updated"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"name"})," and ",(0,s.jsx)(i.code,{children:"description"})," allows describing what your hook is and what it's doing"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"headers"})," allows specifying custom HTTPs headers to pass while calling webhook"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"features"})," and ",(0,s.jsx)(i.code,{children:"projects"})," specify hook scope : hook will be called only when a listed feature (or a feature of one of the listed projects) is modified"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"context"})," and ",(0,s.jsx)(i.code,{children:"user"})," allows specifying context and user for which activation will be recomputed"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"custom body"})," allows transforming sent body (using a ",(0,s.jsx)(i.a,{href:"https://handlebarsjs.com/",children:"handlebars template"}),").\nThis is especially useful when integrating with external services, such as messaging systems."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["When enabling ",(0,s.jsx)(i.code,{children:"custom body"}),", a template editor appears on the screen."]}),"\n",(0,s.jsx)(i.p,{children:'This editor allows indicating handlebars template to apply to "original" events in order to generate event to send.'}),"\n",(0,s.jsx)(i.p,{children:'Left part of the screen allows to select or edit and "original" event.\nRight part allows typing your template.'}),"\n",(0,s.jsx)("img",{src:l}),"\n",(0,s.jsx)(i.p,{children:"Bottom button allows applying your template on selected (or edited) event, and will display the result.\nIt's useful to make sure that your template work as expected."}),"\n",(0,s.jsx)("img",{src:d}),"\n",(0,s.jsx)(i.h2,{id:"webhook-call",children:"Webhook call"}),"\n",(0,s.jsx)(i.p,{children:"Webhook is called for a feature in scope when:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"it's created"}),"\n",(0,s.jsx)(i.li,{children:"it's deleted"}),"\n",(0,s.jsx)(i.li,{children:"its enabling is modified"}),"\n",(0,s.jsx)(i.li,{children:"its activation conditions are modified"}),"\n",(0,s.jsx)(i.li,{children:"an overload is created / updated / deleted for it"}),"\n",(0,s.jsx)(i.li,{children:"its name changes (we need to call webhook since user based activation condition rely on name)"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"resilience",children:"Resilience"}),"\n",(0,s.jsx)(i.p,{children:"Izanami offers some guarantees for webhook resilience."}),"\n",(0,s.jsxs)(i.p,{children:["If webhook call timeout or if remote server respond with an error code,\nIzanami will retry the call several times, with an increased interval between calls.\nTo do so, Izanami will use ",(0,s.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/Exponential_backoff",children:"exponential backoff algorithm"}),"\nelements of this algorithm can be configured, see ",(0,s.jsx)(i.a,{href:"./configuration#webhooks",children:"dedicated configuration section"})," for details."]}),"\n",(0,s.jsx)(i.p,{children:"If Izanami instance is shut down (or crashes) while making an initial or retry call, webhook call will be retried after some times either when Izanami instances restart or by another instance if Izanami has multiple instances."}),"\n",(0,s.jsx)(i.h2,{id:"rights",children:"Rights"}),"\n",(0,s.jsx)(i.p,{children:"Each hook has a dedicated right section, as for keys, tenants or projects, users can have 3 right levels on hooks :"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Read hook information"}),(0,s.jsx)(i.th,{children:"Read hook information"}),(0,s.jsx)(i.th,{children:"Create/update webhook"}),(0,s.jsx)(i.th,{children:"Delete webhook"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Read"}),(0,s.jsx)(i.td,{children:"\u2705"}),(0,s.jsx)(i.td,{children:"\u274c"}),(0,s.jsx)(i.td,{children:"\u274c"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Write"}),(0,s.jsx)(i.td,{children:"\u2705"}),(0,s.jsx)(i.td,{children:"\u2705"}),(0,s.jsx)(i.td,{children:"\u274c"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Admin (or tenant/global admin)"}),(0,s.jsx)(i.td,{children:"\u2705"}),(0,s.jsx)(i.td,{children:"\u2705"}),(0,s.jsx)(i.td,{children:"\u2705"})]})]})]})]})}function x(e={}){const{wrapper:i}={...(0,t.a)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}},1361:(e,i,n)=>{n.d(i,{j:()=>a});const s={description__trivia:"description__trivia_yesz"};var t=n(4625),o=n(5893);function a(e){let{children:i}=e;return(0,o.jsxs)("div",{className:s.description__trivia,children:[(0,o.jsx)("img",{src:t.Z}),(0,o.jsx)("div",{children:i})]})}},4625:(e,i,n)=>{n.d(i,{Z:()=>s});const s=n.p+"assets/images/izanami_compressed-659337582c1667d92966e42fa1bfea3f.webp"},1151:(e,i,n)=>{n.d(i,{Z:()=>r,a:()=>a});var s=n(7294);const t={},o=s.createContext(t);function a(e){const i=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(o.Provider,{value:i},e.children)}}}]);