"use strict";(self.webpackChunkizanami_documentation=self.webpackChunkizanami_documentation||[]).push([[8882],{1805:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var t=a(5893),i=a(1151);const r={title:"APIs"},l=void 0,s={id:"features-flipping/api",title:"APIs",description:"Data model",source:"@site/v1/11-features-flipping/03-api.mdx",sourceDirName:"11-features-flipping",slug:"/features-flipping/api",permalink:"/izanami/v1/features-flipping/api",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"APIs"},sidebar:"defaultSidebar",previous:{title:"Scripts",permalink:"/izanami/v1/features-flipping/scripts"},next:{title:"Lock path",permalink:"/izanami/v1/features-flipping/lock"}},c={},d=[{value:"Data model",id:"data-model",level:2},{value:"NO_STRATEGY format",id:"no_strategy-format",level:3},{value:"RELEASE_DATE format",id:"release_date-format",level:3},{value:"DATE_RANGE format",id:"date_range-format",level:3},{value:"HOUR_RANGE format",id:"hour_range-format",level:3},{value:"SCRIPT format",id:"script-format",level:3},{value:"GLOBAL_SCRIPT format",id:"global_script-format",level:3},{value:"PERCENTAGE format",id:"percentage-format",level:3},{value:"CRUD API",id:"crud-api",level:2},{value:"List all",id:"list-all",level:3},{value:"Create a feature",id:"create-a-feature",level:3},{value:"Get a feature",id:"get-a-feature",level:3},{value:"Update a feature",id:"update-a-feature",level:3},{value:"Patch a feature",id:"patch-a-feature",level:3},{value:"Delete a feature",id:"delete-a-feature",level:3},{value:"Check features",id:"check-features",level:2},{value:"Check a feature without context",id:"check-a-feature-without-context",level:3},{value:"Check a feature with context",id:"check-a-feature-with-context",level:3},{value:"The Tree API",id:"the-tree-api",level:3},{value:"List features with the active attribute without context",id:"list-features-with-the-active-attribute-without-context",level:3},{value:"List features with the active attribute with context",id:"list-features-with-the-active-attribute-with-context",level:3},{value:"Download and Upload",id:"download-and-upload",level:2},{value:"Download",id:"download",level:3},{value:"Upload",id:"upload",level:3}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"data-model",children:"Data model"}),"\n",(0,t.jsx)(n.p,{children:"The feature structure depends on the type of the strategy. A feature can have the following strategies:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"NO_STRATEGY"}),": active or inactive"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RELEASE_DATE"}),": active on a specific date"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DATE_RANGE"}),": active between two date"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SCRIPT"}),": Activation depends on the execution of a js script"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GLOBAL_SCRIPT"}),": Activation depends on the execution of a js script shared across feature"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"PERCENTAGE"}),": Active for a percentage of client"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"no_strategy-format",children:"NO_STRATEGY format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "basic:feature",\n  "enabled": true,\n  "activationStrategy": "NO_STRATEGY"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"release_date-format",children:"RELEASE_DATE format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "feature:with:date",\n  "enabled": true,\n  "parameters": {\n    "releaseDate": "13/12/2017 10:29:04"\n  },\n  "activationStrategy": "RELEASE_DATE"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"date_range-format",children:"DATE_RANGE format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "feature:with:datetange",\n  "enabled": true,\n  "parameters": {\n    "from": "2017-12-13 10:29:04",\n    "to": "2017-12-14 00:45:23"\n  },\n  "activationStrategy": "DATE_RANGE"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"hour_range-format",children:"HOUR_RANGE format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "feature:with:hour:range",\n  "enabled": true,\n  "parameters": {\n    "startDate": "10:15",\n    "endDate": "18:30"\n  },\n  "activationStrategy": "HOUR_RANGE"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"script-format",children:"SCRIPT format"}),"\n",(0,t.jsxs)(n.p,{children:["The field ",(0,t.jsx)(n.code,{children:"type"}),"can be"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"javascript"}),"\n",(0,t.jsx)(n.li,{children:"kotlin"}),"\n",(0,t.jsx)(n.li,{children:"scala"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "feature:with:script",\n  "enabled": true,\n  "parameters": {\n    "type": "javascript",\n    "script": "/**\\n * context:  a JSON object containing app specific value \\n *           to evaluate the state of the feature\\n * enabled:  a callback to mark the feature as active \\n *           for this request\\n * disabled: a callback to mark the feature as inactive \\n *           for this request \\n * http:     a http client\\n */ \\nfunction enabled(context, enabled, disabled, http) {\\n  if (context.user === \'ragnar.lodbrok@gmail.com\') {\\n    return enabled();\\n  }\\n  return disabled();\\n}"\n  },\n  "activationStrategy": "SCRIPT"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"global_script-format",children:"GLOBAL_SCRIPT format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "feature:with:global:script",\n  "enabled": false,\n  "parameters": {\n    "ref": "project:script:ref"\n  },\n  "activationStrategy": "GLOBAL_SCRIPT"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"percentage-format",children:"PERCENTAGE format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "feature:with:percentage",\n  "enabled": false,\n  "parameters": {\n    "percentage": 60\n  },\n  "activationStrategy": "PERCENTAGE"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"crud-api",children:"CRUD API"}),"\n",(0,t.jsx)(n.p,{children:"Features expose a classic CRUD REST api :"}),"\n",(0,t.jsx)(n.h3,{id:"list-all",children:"List all"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X GET \\\n  'http://localhost:9000/api/features?pattern=feature:*&page=1&pageSize=15' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 200 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "id": "feature:with:date",\n      "enabled": true,\n      "parameters": {\n        "releaseDate": "13/12/2017 10:29:04"\n      },\n      "activationStrategy": "RELEASE_DATE"\n    },\n    {\n      "id": "feature:with:script",\n      "enabled": true,\n      "parameters": {\n        "type": "javascript",\n        "script": "/**\\n * context:  a JSON object containing app specific value \\n *           to evaluate the state of the feature\\n * enabled:  a callback to mark the feature as active \\n *           for this request\\n * disabled: a callback to mark the feature as inactive \\n *           for this request \\n * http:     a http client\\n */ \\nfunction enabled(context, enabled, disabled, http) {\\n  if (context.user === \'ragnar.lodbrok@gmail.com\') {\\n    return enabled();\\n  }\\n  return disabled();\\n}"\n      },\n      "activationStrategy": "SCRIPT"\n    },\n    {\n      "id": "feature:with:global:script",\n      "enabled": true,\n      "parameters": {\n        "ref": "project:script2"\n      },\n      "activationStrategy": "GLOBAL_SCRIPT"\n    }\n  ],\n  "metadata": {\n    "page": 1,\n    "pageSize": 15,\n    "count": 3,\n    "nbPages": 1\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"The query params are optional and the value used in this example are the default one."}),"\n",(0,t.jsx)(n.h3,{id:"create-a-feature",children:"Create a feature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -XPOST \\\n    'http://localhost:9000/api/features' \\\n    -H 'Content-Type: application/json' \\\n    -H 'Izanami-Client-Id: xxxx' \\\n    -H 'Izanami-Client-Secret: xxxx' \\\n    -d '{ \"id\": \"really:basic:feature\", \"enabled\": true, \"activationStrategy\": \"NO_STRATEGY\" }' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 201 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "really:basic:feature",\n  "enabled": true,\n  "activationStrategy": "NO_STRATEGY"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"get-a-feature",children:"Get a feature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X GET \\\n  'http://localhost:9000/api/features/really:basic:feature' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 200 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "really:basic:feature",\n  "enabled": true,\n  "activationStrategy": "NO_STRATEGY"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"update-a-feature",children:"Update a feature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X PUT \\\n  'http://localhost:9000/api/features/really:basic:feature' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' \\\n  -d '{ \"id\": \"really:basic:feature\", \"enabled\": false, \"activationStrategy\": \"NO_STRATEGY\" }' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 200 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "really:basic:feature",\n  "enabled": false,\n  "activationStrategy": "NO_STRATEGY"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"patch-a-feature",children:"Patch a feature"}),"\n",(0,t.jsx)(n.p,{children:"Partial updates can be done using json patch :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X PATCH \\\n  'http://localhost:9000/api/features/really:basic:feature' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' \\\n  -d '[{\"op\": \"replace\", \"path\": \"enabled\", \"value\": false}]'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 200 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "really:basic:feature",\n  "enabled": false,\n  "activationStrategy": "NO_STRATEGY"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"delete-a-feature",children:"Delete a feature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X DELETE \\\n  'http://localhost:9000/api/features/really:basic:feature' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 200 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "id": "really:basic:feature",\n  "enabled": false,\n  "activationStrategy": "NO_STRATEGY"\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["As you can see, the keys are split with ",(0,t.jsx)(n.code,{children:":"})," and the values are"]}),"\n",(0,t.jsx)(n.h2,{id:"check-features",children:"Check features"}),"\n",(0,t.jsx)(n.p,{children:"We can divide the feature in two kind :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["feature without context:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"NO_STRATEGY"})," features"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"RELEASE_DATE"})," features"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"DATE_RANGE"})," features"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"HOUR_RANGE"})," features"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["feature needing context:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SCRIPT"})," features"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"GLOBAL_SCRIPT"})," features"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"PERCENTAGE"})," features"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"check-a-feature-without-context",children:"Check a feature without context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X GET \\\n  'http://localhost:9000/api/features/really:basic:feature/check' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 200 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "active": true\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"check-a-feature-with-context",children:"Check a feature with context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X POST \\\n  'http://localhost:9000/api/features/feature:with:script/check' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' \\\n  -d '{ \"user\": \"ragnar.lodbrok@gmail.com\" }' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 200 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "active": true\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"The percentage strategy need a context with an id field in order to decide if the feature is active for this id."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X POST \\\n  'http://localhost:9000/api/features/feature:with:percentage/check' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' \\\n  -d '{ \"id\": \"ragnar.lodbrok@gmail.com\" }' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"Will respond with a 200 status code:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "active": true\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"the-tree-api",children:"The Tree API"}),"\n",(0,t.jsx)(n.p,{children:"With the tree api you can check the features and get the results as tree.\nBe careful using this API because the results are not paged so be sure to use an appropriate pattern :"}),"\n",(0,t.jsx)(n.p,{children:"Check the features without context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X GET \\\n  'http://localhost:9000/api/tree/features?pattern=feature:*' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"We will get the following response:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "feature": {\n    "simple": {\n      "active": true\n    },\n    "with": {\n      "date": {\n        "active": true\n      },\n      "script": {\n        "active": false\n      },\n      "global": {\n        "script": {\n          "active": false\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Or with context:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X POST \\\n  'http://localhost:9000/api/tree/features?pattern=feature:*' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' \\\n  -d '{ \"user\": \"ragnar.lodbrok@gmail.com\" }' \\\n  | jq\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "feature": {\n    "simple": {\n      "active": true\n    },\n    "with": {\n      "date": {\n        "active": true\n      },\n      "script": {\n        "active": false\n      },\n      "global": {\n        "script": {\n          "active": true\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"list-features-with-the-active-attribute-without-context",children:"List features with the active attribute without context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X GET \\\n  'http://localhost:9000/api/features?pattern=feature:*&active=true' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"The result is the following"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "id": "feature:simple",\n      "enabled": true,\n      "activationStrategy": "NO_STRATEGY",\n      "active": true\n    },\n    {\n      "id": "feature:with:date",\n      "enabled": true,\n      "parameters": {\n        "releaseDate": "13/12/2017 10:29:04"\n      },\n      "activationStrategy": "RELEASE_DATE",\n      "active": true\n    },\n    {\n      "id": "feature:with:script",\n      "enabled": true,\n      "parameters": {\n        "type": "javascript",\n        "script": "/**\\n * context:  a JSON object containing app specific value \\n *           to evaluate the state of the feature\\n * enabled:  a callback to mark the feature as active \\n *           for this request\\n * disabled: a callback to mark the feature as inactive \\n *           for this request \\n * http:     a http client\\n */ \\nfunction enabled(context, enabled, disabled, http) {\\n  if (context.user === \'ragnar.lodbrok@gmail.com\') {\\n    return enabled();\\n  }\\n  return disabled();\\n}"\n      },\n      "activationStrategy": "SCRIPT",\n      "active": false\n    },\n    {\n      "id": "feature:with:global:script",\n      "enabled": true,\n      "parameters": {\n        "ref": "project:script2"\n      },\n      "activationStrategy": "GLOBAL_SCRIPT",\n      "active": false\n    }\n  ],\n  "metadata": {\n    "page": 1,\n    "pageSize": 15,\n    "count": 4,\n    "nbPages": 1\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"list-features-with-the-active-attribute-with-context",children:"List features with the active attribute with context"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X POST \\\n  'http://localhost:9000/api/features/_checks?pattern=feature:*' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' \\\n  -d '{ \"user\": \"ragnar.lodbrok@gmail.com\" }' \\\n  | jq\n"})}),"\n",(0,t.jsx)(n.p,{children:"The result is the following"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "id": "feature:simple",\n      "enabled": true,\n      "activationStrategy": "NO_STRATEGY",\n      "active": true\n    },\n    {\n      "id": "feature:with:date",\n      "enabled": true,\n      "parameters": {\n        "releaseDate": "13/12/2017 10:29:04"\n      },\n      "activationStrategy": "RELEASE_DATE",\n      "active": true\n    },\n    {\n      "id": "feature:with:script",\n      "enabled": true,\n      "parameters": {\n        "type": "javascript",\n        "script": "/**\\n * context:  a JSON object containing app specific value \\n *           to evaluate the state of the feature\\n * enabled:  a callback to mark the feature as active \\n *           for this request\\n * disabled: a callback to mark the feature as inactive \\n *           for this request \\n * http:     a http client\\n */ \\nfunction enabled(context, enabled, disabled, http) {\\n  if (context.user === \'ragnar.lodbrok@gmail.com\') {\\n    return enabled();\\n  }\\n  return disabled();\\n}"\n      },\n      "activationStrategy": "SCRIPT",\n      "active": true\n    },\n    {\n      "id": "feature:with:global:script",\n      "enabled": true,\n      "parameters": {\n        "ref": "project:script2"\n      },\n      "activationStrategy": "GLOBAL_SCRIPT",\n      "active": false\n    }\n  ],\n  "metadata": {\n    "page": 1,\n    "pageSize": 15,\n    "count": 4,\n    "nbPages": 1\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"download-and-upload",children:"Download and Upload"}),"\n",(0,t.jsxs)(n.p,{children:["Download and upload is done using the ",(0,t.jsx)(n.a,{href:"http://ndjson.org/",children:"nd-json"})," format."]}),"\n",(0,t.jsx)(n.h3,{id:"download",children:"Download"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -X GET \\\n  'http://localhost:9000/api/features.ndjson' \\\n  -H 'Izanami-Client-Id: xxxx' \\\n  -H 'Izanami-Client-Secret: xxxx' | jq\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Will return each item separated by a ",(0,t.jsx)(n.code,{children:"\\n"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-nd-json",children:'{\n  "id": "feature:simple1",\n  "enabled": true,\n  "activationStrategy": "NO_STRATEGY"\n}\n{\n  "id": "feature:simple2",\n  "enabled": true,\n  "activationStrategy": "NO_STRATEGY"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"upload",children:"Upload"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST \\\n  \'http://localhost:9000/api/features.ndjson\' \\\n  -H \'Content-Type: application/nd-json\' \\\n  -H \'Izanami-Client-Id: xxxx\' \\\n  -H \'Izanami-Client-Secret: xxxx\' \\\n  -d \'{"id": "feature:simple1","enabled": true,"activationStrategy": "NO_STRATEGY","active": true}\n      {"id": "feature:simple2","enabled": true,"activationStrategy": "NO_STRATEGY","active": true}\' \\\n   | jq\n'})}),"\n",(0,t.jsx)(n.p,{children:"Will return"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "success": 2,\n  "errors": {\n    "errors": [],\n    "fieldErrors": {}\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},1151:(e,n,a)=>{a.d(n,{Z:()=>s,a:()=>l});var t=a(7294);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);