"use strict";(self.webpackChunkizanami_documentation=self.webpackChunkizanami_documentation||[]).push([[82],{8937:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>n,metadata:()=>l,toc:()=>a});var i=t(5893),r=t(1151);const n={title:"Configuring Izanami"},d=void 0,l={id:"guides/configuration",title:"Configuring Izanami",description:"Mandatory parameters",source:"@site/docs/04-guides/11-configuration.mdx",sourceDirName:"04-guides",slug:"/guides/configuration",permalink:"/izanami/docs/guides/configuration",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:11,frontMatter:{title:"Configuring Izanami"},sidebar:"tutorialSidebar",previous:{title:"Configuring mailer",permalink:"/izanami/docs/guides/mailer-configuration"},next:{title:"Clients",permalink:"/izanami/docs/clients/"}},c={},a=[{value:"Mandatory parameters",id:"mandatory-parameters",level:2},{value:"Secret",id:"secret",level:3},{value:"Database",id:"database",level:3},{value:"Admin account",id:"admin-account",level:3},{value:"Exposition url",id:"exposition-url",level:3},{value:"Optional parameters",id:"optional-parameters",level:2},{value:"OpenId",id:"openid",level:3},{value:"Wasmo",id:"wasmo",level:3},{value:"Various time to live",id:"various-time-to-live",level:3},{value:"Cors",id:"cors",level:3}];function h(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"mandatory-parameters",children:"Mandatory parameters"}),"\n",(0,i.jsx)(s.h3,{id:"secret",children:"Secret"}),"\n",(0,i.jsx)(s.p,{children:"This parameter is mandatory for production purpose.\nThis secret is used to encrypt various stuff such as token, cookies, or passwords."}),"\n",(0,i.jsx)(s.p,{children:"Your application secret must have at least 256 bits."}),"\n",(0,i.jsxs)(s.p,{children:["You can either set the ",(0,i.jsx)(s.code,{children:"IZANAMI_SECRET"})," env variable or use the ",(0,i.jsx)(s.code,{children:"app.secret"})," parameter."]}),"\n",(0,i.jsxs)(s.p,{children:["\u26a0\ufe0f If a custom secret is not set, a default will be used.\n",(0,i.jsx)(s.strong,{children:"This default is not secured"})," since it's visible in Izanami public github repository."]}),"\n",(0,i.jsx)(s.h3,{id:"database",children:"Database"}),"\n",(0,i.jsx)(s.p,{children:"You can either provide a connection URI, or indicate database name, user, host, port and so on separately."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{}),(0,i.jsx)(s.th,{children:"Environnement variable"}),(0,i.jsx)(s.th,{children:"Program argument"}),(0,i.jsx)(s.th,{children:"Default"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Uri"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_URI"}),(0,i.jsx)(s.td,{children:"app.pg.uri"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Port"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_PORT"}),(0,i.jsx)(s.td,{children:"app.pg.port"}),(0,i.jsx)(s.td,{children:"5432"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Host"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_HOST"}),(0,i.jsx)(s.td,{children:"app.pg.host"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Database name"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_DATABASE"}),(0,i.jsx)(s.td,{children:"app.pg.database"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"User"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_USER"}),(0,i.jsx)(s.td,{children:"app.pg.user"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Password"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_PASSWORD"}),(0,i.jsx)(s.td,{children:"app.pg.password"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Pool size"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_POOL_SIZE"}),(0,i.jsx)(s.td,{children:"app.pg.pool-size"}),(0,i.jsx)(s.td,{children:"20"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Connect timeout(ms)"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_CONNECT_TIMEOUT"}),(0,i.jsx)(s.td,{children:"app.pg.connect-timeout"}),(0,i.jsx)(s.td,{children:"60000"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"IDLE timeout(s)"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_IDLE_TIMEOUT"}),(0,i.jsx)(s.td,{children:"app.pg.idle-timeout"}),(0,i.jsx)(s.td,{children:"0 (no timeout)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Log activity"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_LOG_ACTIVITY"}),(0,i.jsx)(s.td,{children:"app.pg.log-activity"}),(0,i.jsx)(s.td,{children:"false"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Pipelining limit"}),(0,i.jsx)(s.td,{children:"IZANAMI_PG_PIPELINING_LIMIT"}),(0,i.jsx)(s.td,{children:"app.pg.pipelining-limit"}),(0,i.jsx)(s.td,{children:"256"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"admin-account",children:"Admin account"}),"\n",(0,i.jsx)(s.p,{children:"When creating on an empty database, Izanami will create a user for you."}),"\n",(0,i.jsx)(s.p,{children:"You'll have to use this user for your first login."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{}),(0,i.jsx)(s.th,{children:"Environnement variable"}),(0,i.jsx)(s.th,{children:"Program argument"}),(0,i.jsx)(s.th,{children:"Default"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Username"}),(0,i.jsx)(s.td,{children:"IZANAMI_ADMIN_DEFAULT_USERNAME"}),(0,i.jsx)(s.td,{children:"app.admin.username"}),(0,i.jsx)(s.td,{children:"RESERVED_ADMIN_USER"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Password"}),(0,i.jsx)(s.td,{children:"IZANAMI_ADMIN_DEFAULT_PASSWORD"}),(0,i.jsx)(s.td,{children:"app.admin.password"}),(0,i.jsx)(s.td,{children:"generated (and printed in stdout)"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"exposition-url",children:"Exposition url"}),"\n",(0,i.jsx)(s.p,{children:"Izanami needs to know on which URL it is exposed, this use for generating invitation link or query builder links."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{}),(0,i.jsx)(s.th,{children:"Environnement variable"}),(0,i.jsx)(s.th,{children:"Program argument"}),(0,i.jsx)(s.th,{children:"Default"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Exposition URL"}),(0,i.jsx)(s.td,{children:"IZANAMI_EXPOSITION_URL"}),(0,i.jsx)(s.td,{children:"app.exposition.url"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.code,{children:"http://localhost:${http.port}"})})})]})})]}),"\n",(0,i.jsx)(s.h2,{id:"optional-parameters",children:"Optional parameters"}),"\n",(0,i.jsx)(s.h3,{id:"openid",children:"OpenId"}),"\n",(0,i.jsx)(s.p,{children:"Izanami allows to set up an external openid provider."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{}),(0,i.jsx)(s.th,{children:"Environnement variable"}),(0,i.jsx)(s.th,{children:"Program argument"}),(0,i.jsx)(s.th,{children:"Default"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Client ID"}),(0,i.jsx)(s.td,{children:"IZANAMI_OPENID_CLIENT_ID"}),(0,i.jsx)(s.td,{children:"app.openid.client-id"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Client secret"}),(0,i.jsx)(s.td,{children:"IZANAMI_OPENID_CLIENT_SECRET"}),(0,i.jsx)(s.td,{children:"app.openid.client-secret"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Authorize URL"}),(0,i.jsx)(s.td,{children:"IZANAMI_OPENID_AUTHORIZE_URL"}),(0,i.jsx)(s.td,{children:"app.openid.authorize-url"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Token URL"}),(0,i.jsx)(s.td,{children:"IZANAMI_OPENID_TOKEN_URL"}),(0,i.jsx)(s.td,{children:"app.openid.token-url"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Redirect URL"}),(0,i.jsx)(s.td,{children:"IZANAMI_OPENID_REDIRECT_URL"}),(0,i.jsx)(s.td,{children:"app.openid.redirect-url"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.code,{children:"${app.exposition.url}/login"})})})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"wasmo",children:"Wasmo"}),"\n",(0,i.jsx)(s.p,{children:"If you chose to set up a WASMO instance alongside Izanami, you'll need to provide additional properties."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{}),(0,i.jsx)(s.th,{children:"Environnement variable"}),(0,i.jsx)(s.th,{children:"Program argument"}),(0,i.jsx)(s.th,{children:"Default"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Wasmo url"}),(0,i.jsx)(s.td,{children:"IZANAMI_WASMO_URL"}),(0,i.jsx)(s.td,{children:"app.wasmo.url"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Wasmo client id"}),(0,i.jsx)(s.td,{children:"IZANAMI_WASMO_CLIENT_ID"}),(0,i.jsx)(s.td,{children:"app.wasmo.client-id"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Wasmo client secret"}),(0,i.jsx)(s.td,{children:"IZANAMI_WASMO_CLIENT_SECRET"}),(0,i.jsx)(s.td,{children:"app.wasmo.client-secret"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Wasm cache TTL (ms)"}),(0,i.jsx)(s.td,{children:"IZANAMI_WASM_CACHE_TTL"}),(0,i.jsx)(s.td,{children:"app.wasm.cache.ttl"}),(0,i.jsx)(s.td,{children:"60000"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"various-time-to-live",children:"Various time to live"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{}),(0,i.jsx)(s.th,{children:"Environnement variable"}),(0,i.jsx)(s.th,{children:"Program argument"}),(0,i.jsx)(s.th,{children:"Default"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Invitation time to live (s)"}),(0,i.jsx)(s.td,{children:"IZANAMI_INVITATIONS_TTL"}),(0,i.jsx)(s.td,{children:"app.invitations.ttl"}),(0,i.jsx)(s.td,{children:"86400 (24h)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Session time to live (s)"}),(0,i.jsx)(s.td,{children:"IZANAMI_SESSIONS_TTL"}),(0,i.jsx)(s.td,{children:"app.sessions.ttl"}),(0,i.jsx)(s.td,{children:"3700"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Password reset request time to live (s)"}),(0,i.jsx)(s.td,{children:"IZANAMI_PASSWORD_RESET_REQUEST_TTL"}),(0,i.jsx)(s.td,{children:"app.password-reset-requests.ttl"}),(0,i.jsx)(s.td,{children:"900 (15min)"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"cors",children:"Cors"}),"\n",(0,i.jsxs)(s.p,{children:["Izanami uses ",(0,i.jsx)(s.a,{href:"https://www.playframework.com/documentation/3.0.x/CorsFilter#Configuring-the-CORS-filter",children:"Play CORS filter"})," to handle CORS."]}),"\n",(0,i.jsxs)(s.p,{children:["Therefore, CORS is configurable using ",(0,i.jsx)(s.code,{children:"play.filters.cors"})," configuration keys."]}),"\n",(0,i.jsx)(s.p,{children:"Alternatively, Izanami re-exposes these configuration keys with below env variables :"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Play configuration key"}),(0,i.jsx)(s.th,{children:"Environnement variable"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"play.filters.cors.pathPrefixes"}),(0,i.jsx)(s.td,{children:"IZANAMI_CORS_PATH_PREFIXES"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"play.filters.cors.allowedOrigins"}),(0,i.jsx)(s.td,{children:"IZANAMI_CORS_ALLOWED_ORIGINS"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"play.filters.cors.allowedHttpMethods"}),(0,i.jsx)(s.td,{children:"IZANAMI_CORS_ALLOWED_HTTP_METHODS"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"play.filters.cors.allowedHttpHeaders"}),(0,i.jsx)(s.td,{children:"IZANAMI_CORS_ALLOWED_HTTP_HEADERS"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"play.filters.cors.exposedHeaders"}),(0,i.jsx)(s.td,{children:"IZANAMI_CORS_EXPOSED_HEADERS"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"play.filters.cors.supportsCredentials"}),(0,i.jsx)(s.td,{children:"IZANAMI_CORS_SUPPORTS_CREDENTIALS"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"play.filters.cors.preflightMaxAge"}),(0,i.jsx)(s.td,{children:"IZANAMI_CORS_PREFLIGHT_MAX_AGE"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"play.filters.cors.serveForbiddenOrigins"}),(0,i.jsx)(s.td,{children:"IZANAMI_CORS_SERVE_FORBIDDEN_ORIGINS"})]})]})]})]})}function o(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},1151:(e,s,t)=>{t.d(s,{Z:()=>l,a:()=>d});var i=t(7294);const r={},n=i.createContext(r);function d(e){const s=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(n.Provider,{value:s},e.children)}}}]);