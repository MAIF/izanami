"use strict";(self.webpackChunkizanami_documentation=self.webpackChunkizanami_documentation||[]).push([[1046],{8402:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>u});var i=t(5893),a=t(1151),r=t(1361);const c={title:"Cache"},o=void 0,s={id:"clients/java/cache",title:"Cache",description:"Client put features in cache with their activation conditions (or alternative values for string/number features).",source:"@site/docs/05-clients/01-java/01-cache.mdx",sourceDirName:"05-clients/01-java",slug:"/clients/java/cache",permalink:"/izanami/docs/clients/java/cache",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Cache"},sidebar:"tutorialSidebar",previous:{title:"Java client",permalink:"/izanami/docs/clients/java/"},next:{title:"Error handling",permalink:"/izanami/docs/clients/java/error-handling"}},l={},u=[];function d(e){const n={code:"code",p:"p",pre:"pre",strong:"strong",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Client put features in cache with their activation conditions (or alternative values for string/number features)."}),"\n",(0,i.jsxs)(n.p,{children:["This means that (except for script features) client can ",(0,i.jsx)(n.strong,{children:"compute feature value locally"}),", without the need to perform an http call to remote Izanami.\nIn this mode, feature activation conditions/alternative values are ",(0,i.jsx)(n.strong,{children:"updated periodically in background"}),"."]}),"\n",(0,i.jsx)(r.j,{children:(0,i.jsx)(n.p,{children:"Script features can't be evaluated locally, since client does not embed a WASM\nruntime."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"IzanamiClient client = IzanamiClient.newBuilder(\n    connectionInformation()\n      .withUrl(<REMOTE_IZANAMI_BASE_URL>/api)\n      .withClientId(<YOUR_KEY_CLIENT_ID>)\n      .withClientSecret(<YOUR_KEY_CLIENT_SECRET>)\n  ).withCacheConfiguration(\n    FeatureCacheConfiguration\n      .newBuilder()\n      .enabled(true) // Enable caching feature activation conditions and local activation computation\n      .withRefreshInterval(Duration.ofMinutes(5L)) // Optional : how frequently cache will be refreshed\n      .build()\n  ).build();\n"})}),"\n",(0,i.jsx)(n.p,{children:"By default, cache is disabled and a query is sent to remote Izanami for each request."}),"\n",(0,i.jsx)(n.p,{children:"When cache is active, it's always possible to skip it for some queries :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"CompletableFuture<Boolean> result = client.booleanValue(\n    newSingleFeatureRequest(id)\n    .ignoreCache(true) // Ignore cache and perform request for this query\n);\n\nCompletableFuture<Boolean> another = client.booleanValue(\n  newFeatureRequest()\n    .withFeatures(<FEATURE_IDS>)\n    .ignoreCache(true) // Ignore cache and perform request for this query\n);\n"})}),"\n",(0,i.jsx)(r.j,{children:(0,i.jsx)(n.p,{children:"Ignoring cache this way will still update cache with retrieved activation\nconditions."})})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1361:(e,n,t)=>{t.d(n,{j:()=>c});const i={description__trivia:"description__trivia_yesz"};var a=t(4625),r=t(5893);function c(e){let{children:n}=e;return(0,r.jsxs)("div",{className:i.description__trivia,children:[(0,r.jsx)("img",{src:a.Z}),(0,r.jsx)("div",{children:n})]})}},4625:(e,n,t)=>{t.d(n,{Z:()=>i});const i=t.p+"assets/images/izanami_compressed-659337582c1667d92966e42fa1bfea3f.webp"},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>c});var i=t(7294);const a={},r=i.createContext(a);function c(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);